<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://github.com/Foso/Ktorfit/ rel=canonical><link rel=icon href=assets/images/favicon.png><meta name=generator content="mkdocs-1.3.0, mkdocs-material-8.3.3"><title>Ktorfit</title><link rel=stylesheet href=assets/stylesheets/main.4a0965b7.min.css><link rel=stylesheet href=assets/stylesheets/palette.cbb835fc.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Ubuntu:300,300i,400,400i,700,700i%7CJetbrains+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Ubuntu";--md-code-font:"Jetbrains Mono"}</style><script>__md_scope=new URL(".",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=deep-blue data-md-color-accent=deep-purple> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#introduction class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=. title=Ktorfit class="md-header__button md-logo" aria-label=Ktorfit data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m414.8 40.79-128 448.01c-4.9 17-22.6 26.8-39.6 22-17-4.9-26.8-22.6-22-39.6l128-447.99c4.9-16.994 22.6-26.834 39.6-21.978 17 4.855 26.8 22.568 22 39.558zm103.8 80.61 112 112c12.5 12.5 12.5 32.7 0 45.2l-112 112c-12.5 12.5-32.7 12.5-45.2 0s-12.5-32.7 0-45.2l89.3-89.4-89.3-89.4c-12.5-12.5-12.5-32.7 0-45.2s32.7-12.5 45.2 0zm-352 45.2L77.25 256l89.35 89.4c12.5 12.5 12.5 32.7 0 45.2s-32.7 12.5-45.2 0L9.372 278.6c-12.496-12.5-12.496-32.7 0-45.2l112.028-112c12.5-12.5 32.7-12.5 45.2 0s12.5 32.7 0 45.2z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Ktorfit </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Overview </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=deep-blue data-md-color-accent=deep-purple aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/Foso/Ktorfit title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> Ktorfit </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=. title=Ktorfit class="md-nav__button md-logo" aria-label=Ktorfit data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m414.8 40.79-128 448.01c-4.9 17-22.6 26.8-39.6 22-17-4.9-26.8-22.6-22-39.6l128-447.99c4.9-16.994 22.6-26.834 39.6-21.978 17 4.855 26.8 22.568 22 39.558zm103.8 80.61 112 112c12.5 12.5 12.5 32.7 0 45.2l-112 112c-12.5 12.5-32.7 12.5-45.2 0s-12.5-32.7 0-45.2l89.3-89.4-89.3-89.4c-12.5-12.5-12.5-32.7 0-45.2s32.7-12.5 45.2 0zm-352 45.2L77.25 256l89.35 89.4c12.5 12.5 12.5 32.7 0 45.2s-32.7 12.5-45.2 0L9.372 278.6c-12.496-12.5-12.496-32.7 0-45.2l112.028-112c12.5-12.5 32.7-12.5 45.2 0s12.5 32.7 0 45.2z"/></svg> </a> Ktorfit </label> <div class=md-nav__source> <a href=https://github.com/Foso/Ktorfit title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> Ktorfit </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Overview <span class="md-nav__icon md-icon"></span> </label> <a href=. class="md-nav__link md-nav__link--active"> Overview </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#show-some-and-star-the-repo-to-support-the-project class=md-nav__link> Show some and star the repo to support the project </a> </li> <li class=md-nav__item> <a href=#how-to-use class=md-nav__link> How to use </a> </li> <li class=md-nav__item> <a href=#http-request class=md-nav__link> HTTP Request </a> </li> <li class=md-nav__item> <a href=#query class=md-nav__link> Query </a> </li> <li class=md-nav__item> <a href=#path class=md-nav__link> Path </a> </li> <li class=md-nav__item> <a href=#headers class=md-nav__link> Headers </a> </li> <li class=md-nav__item> <a href=#body class=md-nav__link> Body </a> </li> <li class=md-nav__item> <a href=#formdata class=md-nav__link> FormData </a> </li> <li class=md-nav__item> <a href=#multipart class=md-nav__link> Multipart </a> <nav class=md-nav aria-label=Multipart> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-body class=md-nav__link> 1) @Body </a> </li> <li class=md-nav__item> <a href=#2-multipart class=md-nav__link> 2) @MultiPart </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#responseconverter class=md-nav__link> ResponseConverter </a> <nav class=md-nav aria-label=ResponseConverter> <ul class=md-nav__list> <li class=md-nav__item> <a href=#flow class=md-nav__link> Flow </a> </li> <li class=md-nav__item> <a href=#call class=md-nav__link> Call </a> </li> <li class=md-nav__item> <a href=#your-own class=md-nav__link> Your own </a> </li> <li class=md-nav__item> <a href=#json class=md-nav__link> JSON </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#streaming class=md-nav__link> Streaming </a> </li> <li class=md-nav__item> <a href=#requestbuilder class=md-nav__link> RequestBuilder </a> </li> <li class=md-nav__item> <a href=#setup class=md-nav__link> Setup </a> <nav class=md-nav aria-label=Setup> <ul class=md-nav__list> <li class=md-nav__item> <a href=#ksp class=md-nav__link> KSP </a> </li> <li class=md-nav__item> <a href=#ktorfit-lib class=md-nav__link> Ktorfit-lib </a> </li> <li class=md-nav__item> <a href=#ktor class=md-nav__link> Ktor </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#contributions class=md-nav__link> Contributions </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <span style="float: right">🤔 Documentation issue? <a href="https://github.com/foso/Ktorfit/issues/new?assignees=&labels=type%3A+documentation&template=4-doc.md&title=Doc%20issue%20with%20%20page">Report</a> or <a href=https://github.com/Foso/Ktorfit/tree/master/docs/index.md>edit</a></span> <h1>Ktorfit</h1> <p><a href=https://mvnrepository.com/artifact/de.jensklingenberg.ktorfit><img alt="All Contribtors" src="https://img.shields.io/badge/Maven-Central-download.svg?style=flat-square"></a> <a href=https://github.com/Foso/Ktorfit/blob/master/LICENSE><img alt=jCenter src=https://img.shields.io/badge/Apache-2.0-green.svg></a></p> <p align=center> <img src=https://raw.githubusercontent.com/Foso/Experimental/master/carbon.png> </p> <h1 id=introduction>Introduction<a class=headerlink href=#introduction title="Permanent link">&para;</a></h1> <p>Ktorfit is a HTTP client/Kotlin Symbol Processor for Kotlin Multiplatform (Js, Jvm, Android, iOS, Linux) using <a href=https://github.com/google/ksp>KSP</a> and <a href=https://ktor.io/docs/getting-started-ktor-client.html>Ktor clients</a> inspired by <a href=https://square.github.io/retrofit/ >Retrofit</a></p> <h2 id=show-some-and-star-the-repo-to-support-the-project>Show some <img alt=❤️ class=emojione src=https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/2764.png title=:heart:> and star the repo to support the project<a class=headerlink href=#show-some-and-star-the-repo-to-support-the-project title="Permanent link">&para;</a></h2> <p><a href=https://github.com/Foso/Ktorfit><img alt="GitHub stars" src="https://img.shields.io/github/stars/Foso/Ktorfit.svg?style=social&label=Star"></a> <a href=https://github.com/Foso/Ktorfit/fork><img alt="GitHub forks" src="https://img.shields.io/github/forks/Foso/Ktorfit.svg?style=social&label=Fork"></a> <a href=https://github.com/Foso/Ktorfit><img alt="GitHub watchers" src="https://img.shields.io/github/watchers/Foso/Ktorfit.svg?style=social&label=Watch"></a> <a href=https://twitter.com/jklingenberg_><img alt="Twitter Follow" src="https://img.shields.io/twitter/follow/jklingenberg_.svg?style=social"></a></p> <h2 id=how-to-use>How to use<a class=headerlink href=#how-to-use title="Permanent link">&para;</a></h2> <p>First do the <a href=#setup>Setup</a></p> <p>Let&rsquo;s say you want to make a GET Request to <a href=https://swapi.dev/api/people/1/ >https://swapi.dev/api/people/1/</a></p> <p>Create a new Kotlin interface</p> <div class=highlight><pre><span></span><code><span class=kd>interface</span><span class=w> </span><span class=nc>ExampleApi</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=nd>@GET</span><span class=p>(</span><span class=s>&quot;people/1/&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=kd>suspend</span><span class=w> </span><span class=kd>fun</span><span class=w> </span><span class=nf>getPerson</span><span class=p>():</span><span class=w> </span><span class=kt>String</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <div class="admonition info"> <p class=admonition-title>Info</p> <p>The return type String will return the response text. When you want directly parse the response into a class you need to add a JSON,XML, etc. converter to Ktor</p> </div> <p>Now we add a function that will be used to make our request. The @GET annotation will tell Ktorfit that this a GET request. The value of @GET is the relative URL path that will be appended to the base url which we set later.</p> <p>An interface used for Ktorfit needs to have a Http method annotation on every function. Because Ktor relies on Coroutines by default your functions need to have the <strong>suspend</strong> modifier. Alternatively you can use <a href=#flow>#Flow</a> or Call (see below)</p> <div class=highlight><pre><span></span><code><span class=kd>val</span><span class=w> </span><span class=nv>ktorfit</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Ktorfit</span><span class=p>(</span><span class=n>baseUrl</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;https://swapi.dev/api/&quot;</span><span class=p>)</span><span class=w></span>
<span class=kd>val</span><span class=w> </span><span class=nv>exampleApi</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ktorfit</span><span class=p>.</span><span class=na>create</span><span class=o>&lt;</span><span class=n>ExampleApi</span><span class=o>&gt;</span><span class=p>()</span><span class=w></span>
</code></pre></div> <p>Next we need to create a Ktorfit object, in the constructor we set the base url. We can then use the <strong>create()</strong> function to receive an implementation of the wanted type.</p> <div class=highlight><pre><span></span><code><span class=kd>val</span><span class=w> </span><span class=nv>response</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>exampleApi</span><span class=p>.</span><span class=na>getPerson</span><span class=p>()</span><span class=w></span>
<span class=n>println</span><span class=p>(</span><span class=n>response</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p>Now we can use exampleApi to make the request.</p> <h2 id=http-request>HTTP Request<a class=headerlink href=#http-request title="Permanent link">&para;</a></h2> <p>Ktorfit supports the following the Http Method Annotations: @GET, @POST, @PUT, @DELETE, @HEAD, @OPTIONS, @PATCH</p> <p>Or you can set your custom method to @HTTP</p> <h2 id=query>Query<a class=headerlink href=#query title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=nd>@GET</span><span class=p>(</span><span class=s>&quot;comments&quot;</span><span class=p>)</span><span class=w></span>
<span class=kd>suspend</span><span class=w> </span><span class=kd>fun</span><span class=w> </span><span class=nf>getCommentsById</span><span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=nd>@Query</span><span class=p>(</span><span class=s>&quot;postId&quot;</span><span class=p>)</span><span class=w> </span><span class=n>postId</span><span class=p>:</span><span class=w> </span><span class=kt>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=nd>@QueryName</span><span class=w> </span><span class=n>queryName</span><span class=p>:</span><span class=w> </span><span class=kt>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=nd>@QueryMap</span><span class=w> </span><span class=n>headerMap</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=kt>String</span><span class=p>,</span><span class=kt>String</span><span class=o>&gt;</span><span class=w></span>
<span class=p>):</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Comment</span><span class=o>&gt;</span><span class=w></span>
</code></pre></div> <p>You can use @Query, @QueryName or @QueryMap to set queries to your request.</p> <p>Example: <div class=highlight><pre><span></span><code><span class=nd>@GET</span><span class=p>(</span><span class=s>&quot;comments&quot;</span><span class=p>)</span><span class=w></span>
<span class=kd>suspend</span><span class=w> </span><span class=kd>fun</span><span class=w> </span><span class=nf>getCommentsById</span><span class=p>(</span><span class=nd>@Query</span><span class=p>(</span><span class=s>&quot;postId&quot;</span><span class=p>)</span><span class=w> </span><span class=n>postId</span><span class=p>:</span><span class=w> </span><span class=kt>String</span><span class=p>):</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Comment</span><span class=o>&gt;</span><span class=w></span>
</code></pre></div></p> <p>A request with <strong>getCommentsById(3)</strong> will result in the relative URL &ldquo;comments?postId=3&rdquo;</p> <h2 id=path>Path<a class=headerlink href=#path title="Permanent link">&para;</a></h2> <p>When you want to dynamically replace a part of the URL, you can use the @Path annotation. <div class=highlight><pre><span></span><code><span class=kd>interface</span><span class=w> </span><span class=nc>ExampleApi</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=nd>@GET</span><span class=p>(</span><span class=s>&quot;people/{peopleId}/&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=kd>suspend</span><span class=w> </span><span class=kd>fun</span><span class=w> </span><span class=nf>getPerson</span><span class=p>(</span><span class=nd>@Path</span><span class=p>(</span><span class=s>&quot;peopleId&quot;</span><span class=p>)</span><span class=w> </span><span class=n>id</span><span class=p>:</span><span class=w> </span><span class=kt>String</span><span class=p>):</span><span class=w> </span><span class=kt>String</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> Just write a part of your URL path in curly braces. Then you need to annotate a parameter with @Path. The value of @Path needs to match with one of the curly braces part in your URL path.</p> <p>Example:</p> <p>On a request with <strong>getPerson(1)</strong> , <strong>{peopleId}</strong> will be replaced with the argument <strong>1</strong> and the relative URL will become <strong>&ldquo;people/1/&rdquo;</strong></p> <h2 id=headers>Headers<a class=headerlink href=#headers title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=nd>@Headers</span><span class=p>(</span><span class=n>value</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>[</span><span class=s>&quot;Accept: application/json&quot;</span><span class=o>]</span><span class=p>)</span><span class=w></span>
<span class=nd>@GET</span><span class=p>(</span><span class=s>&quot;comments&quot;</span><span class=p>)</span><span class=w></span>
<span class=kd>suspend</span><span class=w> </span><span class=kd>fun</span><span class=w> </span><span class=nf>requestWithHeaders</span><span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=nd>@Header</span><span class=p>(</span><span class=s>&quot;Content-Type&quot;</span><span class=p>)</span><span class=w> </span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=kt>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=nd>@HeaderMap</span><span class=w> </span><span class=n>headerMap</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=kt>String</span><span class=p>,</span><span class=kt>String</span><span class=o>&gt;</span><span class=w></span>
<span class=p>):</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Comment</span><span class=o>&gt;</span><span class=w></span>
</code></pre></div> <p>You can use @Headers, @Header or @HeaderMap to configure headers to your request.</p> <h2 id=body>Body<a class=headerlink href=#body title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=kd>interface</span><span class=w> </span><span class=nc>ExampleService</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=nd>@POST</span><span class=p>(</span><span class=s>&quot;upload&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=kd>suspend</span><span class=w> </span><span class=kd>fun</span><span class=w> </span><span class=nf>upload</span><span class=p>(</span><span class=nd>@Body</span><span class=w> </span><span class=n>data</span><span class=p>:</span><span class=w> </span><span class=kt>String</span><span class=p>)</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <p>@Body can be used as parameter to send data in a request body. It can only be used with Http Methods that have a request body</p> <h2 id=formdata>FormData<a class=headerlink href=#formdata title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=nd>@POST</span><span class=p>(</span><span class=s>&quot;signup&quot;</span><span class=p>)</span><span class=w></span>
<span class=nd>@FormUrlEncoded</span><span class=w></span>
<span class=kd>suspend</span><span class=w> </span><span class=kd>fun</span><span class=w> </span><span class=nf>signup</span><span class=p>(</span><span class=w></span>
<span class=nd>@Field</span><span class=p>(</span><span class=s>&quot;username&quot;</span><span class=p>)</span><span class=w> </span><span class=n>username</span><span class=p>:</span><span class=w> </span><span class=kt>String</span><span class=p>,</span><span class=w> </span><span class=nd>@Field</span><span class=p>(</span><span class=s>&quot;email&quot;</span><span class=p>)</span><span class=w> </span><span class=n>email</span><span class=p>:</span><span class=w> </span><span class=kt>String</span><span class=p>,</span><span class=w></span>
<span class=nd>@Field</span><span class=p>(</span><span class=s>&quot;password&quot;</span><span class=p>)</span><span class=w> </span><span class=n>password</span><span class=p>:</span><span class=w> </span><span class=kt>String</span><span class=p>,</span><span class=w> </span><span class=nd>@Field</span><span class=p>(</span><span class=s>&quot;confirmation&quot;</span><span class=p>)</span><span class=w> </span><span class=n>confirmation</span><span class=p>:</span><span class=w> </span><span class=kt>String</span><span class=w></span>
<span class=p>):</span><span class=w> </span><span class=kt>String</span><span class=w></span>
</code></pre></div> <p>To send FormData you can use @Field or @FieldMap. Your function needs to be annotated with @FormUrlEncoded. </p> <h2 id=multipart>Multipart<a class=headerlink href=#multipart title="Permanent link">&para;</a></h2> <p>To send Multipart data you have two options: </p> <h3 id=1-body>1) @Body<a class=headerlink href=#1-body title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=kd>interface</span><span class=w> </span><span class=nc>ExampleService</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=nd>@POST</span><span class=p>(</span><span class=s>&quot;upload&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=kd>suspend</span><span class=w> </span><span class=kd>fun</span><span class=w> </span><span class=nf>upload</span><span class=p>(</span><span class=nd>@Body</span><span class=w> </span><span class=n>map</span><span class=p>:</span><span class=w> </span><span class=n>MultiPartFormDataContent</span><span class=p>)</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <p>To upload MultiPartFormData you need to have a parameter of the type MultiPartFormDataContent that is annotated with @Body. The method needs to be annotated with @POST or @PUT</p> <div class=highlight><pre><span></span><code><span class=kd>val</span><span class=w> </span><span class=nv>multipart</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>MultiPartFormDataContent</span><span class=p>(</span><span class=n>formData</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=n>append</span><span class=p>(</span><span class=s>&quot;description&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;Ktor logo&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=n>append</span><span class=p>(</span><span class=s>&quot;image&quot;</span><span class=p>,</span><span class=w> </span><span class=n>File</span><span class=p>(</span><span class=s>&quot;ktor_logo.png&quot;</span><span class=p>).</span><span class=na>readBytes</span><span class=p>(),</span><span class=w> </span><span class=n>Headers</span><span class=p>.</span><span class=na>build</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=n>append</span><span class=p>(</span><span class=n>HttpHeaders</span><span class=p>.</span><span class=na>ContentType</span><span class=p>,</span><span class=w> </span><span class=s>&quot;image/png&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>        </span><span class=n>append</span><span class=p>(</span><span class=n>HttpHeaders</span><span class=p>.</span><span class=na>ContentDisposition</span><span class=p>,</span><span class=w> </span><span class=s>&quot;filename=ktor_logo.png&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=p>})</span><span class=w></span>
<span class=p>})</span><span class=w></span>

<span class=n>exampleApi</span><span class=p>.</span><span class=na>upload</span><span class=p>(</span><span class=n>multipart</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p>Then you can use Ktor&rsquo;s formData Builder to create the MultiPartFormDataContent</p> <h3 id=2-multipart>2) @MultiPart<a class=headerlink href=#2-multipart title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=nd>@Multipart</span><span class=w></span>
<span class=nd>@POST</span><span class=p>(</span><span class=s>&quot;upload&quot;</span><span class=p>)</span><span class=w></span>
<span class=kd>suspend</span><span class=w> </span><span class=kd>fun</span><span class=w> </span><span class=nf>uploadFile</span><span class=p>(</span><span class=nd>@Part</span><span class=p>(</span><span class=s>&quot;description&quot;</span><span class=p>)</span><span class=w> </span><span class=n>description</span><span class=p>:</span><span class=w> </span><span class=kt>String</span><span class=p>,</span><span class=w> </span><span class=nd>@Part</span><span class=p>(</span><span class=s>&quot;&quot;</span><span class=p>)</span><span class=w> </span><span class=n>file</span><span class=p>:</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>PartData</span><span class=o>&gt;</span><span class=p>):</span><span class=w> </span><span class=kt>String</span><span class=w></span>
</code></pre></div> <p>You can annotate a function with @Multipart. Then you can annotate parameters with @Part </p> <div class=highlight><pre><span></span><code><span class=kd>val</span><span class=w> </span><span class=nv>multipart</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>formData</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=n>append</span><span class=p>(</span><span class=s>&quot;image&quot;</span><span class=p>,</span><span class=w> </span><span class=n>File</span><span class=p>(</span><span class=s>&quot;ktor_logo.png&quot;</span><span class=p>).</span><span class=na>readBytes</span><span class=p>(),</span><span class=w> </span><span class=n>Headers</span><span class=p>.</span><span class=na>build</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=n>append</span><span class=p>(</span><span class=n>HttpHeaders</span><span class=p>.</span><span class=na>ContentType</span><span class=p>,</span><span class=w> </span><span class=s>&quot;image/png&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>        </span><span class=n>append</span><span class=p>(</span><span class=n>HttpHeaders</span><span class=p>.</span><span class=na>ContentDisposition</span><span class=p>,</span><span class=w> </span><span class=s>&quot;filename=ktor_logo.png&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=p>})</span><span class=w></span>
<span class=p>}</span><span class=w></span>

<span class=n>exampleApi</span><span class=p>.</span><span class=na>upload</span><span class=p>(</span><span class=s>&quot;Ktor logo&quot;</span><span class=p>,</span><span class=n>multipart</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p>All your parameters annotated with @Part wil be combined and send as MultiPartFormDataContent</p> <h2 id=responseconverter>ResponseConverter<a class=headerlink href=#responseconverter title="Permanent link">&para;</a></h2> <p>The idea of a ResponseConverter is to enable directly wrapping response types into other data holder types. </p> <p>You can add adapters on your Ktorfit object.</p> <div class=highlight><pre><span></span><code><span class=n>ktorfit</span><span class=p>.</span><span class=na>addResponseConverter</span><span class=p>(</span><span class=n>FlowResponseConverter</span><span class=p>())</span><span class=w></span>
</code></pre></div> <h3 id=flow>Flow<a class=headerlink href=#flow title="Permanent link">&para;</a></h3> <p>Ktorfit has support for Kotlin Flow. You need add the FlowResponseConverter() to your Ktorfit instance.</p> <div class=highlight><pre><span></span><code><span class=n>ktorfit</span><span class=p>.</span><span class=na>addResponseConverter</span><span class=p>(</span><span class=n>FlowResponseConverter</span><span class=p>())</span><span class=w></span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=nd>@GET</span><span class=p>(</span><span class=s>&quot;comments&quot;</span><span class=p>)</span><span class=w></span>
<span class=kd>fun</span><span class=w> </span><span class=nf>getCommentsById</span><span class=p>(</span><span class=nd>@Query</span><span class=p>(</span><span class=s>&quot;postId&quot;</span><span class=p>)</span><span class=w> </span><span class=n>postId</span><span class=p>:</span><span class=w> </span><span class=kt>String</span><span class=p>):</span><span class=w> </span><span class=n>Flow</span><span class=o>&lt;</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Comment</span><span class=o>&gt;&gt;</span><span class=w></span>
</code></pre></div> <p>Then you can drop the <strong>suspend</strong> modifier and wrap your return type with Flow&lt;&gt;</p> <h3 id=call>Call<a class=headerlink href=#call title="Permanent link">&para;</a></h3> <p><div class=highlight><pre><span></span><code><span class=n>ktorfit</span><span class=p>.</span><span class=na>addResponseConverter</span><span class=p>(</span><span class=n>KtorfitResponseConverter</span><span class=p>())</span><span class=w></span>
</code></pre></div> <div class=highlight><pre><span></span><code><span class=nd>@GET</span><span class=p>(</span><span class=s>&quot;people/{id}/&quot;</span><span class=p>)</span><span class=w></span>
<span class=kd>fun</span><span class=w> </span><span class=nf>getPersonById</span><span class=p>(</span><span class=nd>@Path</span><span class=p>(</span><span class=s>&quot;id&quot;</span><span class=p>)</span><span class=w> </span><span class=n>peopleId</span><span class=p>:</span><span class=w> </span><span class=kt>Int</span><span class=p>):</span><span class=w> </span><span class=n>Call</span><span class=o>&lt;</span><span class=n>People</span><span class=o>&gt;</span><span class=w></span>
</code></pre></div></p> <div class=highlight><pre><span></span><code><span class=n>exampleApi</span><span class=p>.</span><span class=na>getPersonById</span><span class=p>(</span><span class=m>3</span><span class=p>).</span><span class=na>onExecute</span><span class=p>(</span><span class=k>object</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=nc>Callback</span><span class=o>&lt;</span><span class=n>People</span><span class=o>&gt;</span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=kd>override</span><span class=w> </span><span class=kd>fun</span><span class=w> </span><span class=nf>onResponse</span><span class=p>(</span><span class=n>call</span><span class=p>:</span><span class=w> </span><span class=n>People</span><span class=p>,</span><span class=w> </span><span class=n>response</span><span class=p>:</span><span class=w> </span><span class=n>HttpResponse</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=c1>//Do something with Response</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>

<span class=w>    </span><span class=kd>override</span><span class=w> </span><span class=kd>fun</span><span class=w> </span><span class=nf>onError</span><span class=p>(</span><span class=n>exception</span><span class=p>:</span><span class=w> </span><span class=n>Exception</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=c1>//Do something with exception</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>
<span class=p>})</span><span class=w></span>
</code></pre></div> <p>You can use Call<t> to receive the response in a Callback.</p> <h3 id=your-own>Your own<a class=headerlink href=#your-own title="Permanent link">&para;</a></h3> <p>You can also add your own Converter. You just need to implement ResponseConverter</p> <div class=highlight><pre><span></span><code><span class=kd>class</span><span class=w> </span><span class=nc>OwnResponseConverter</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>ResponseConverter</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>   </span><span class=p>...</span><span class=w></span>
</code></pre></div> <h3 id=json>JSON<a class=headerlink href=#json title="Permanent link">&para;</a></h3> <p>Ktorfit doesn&rsquo;t parse JSON. You have to install the Json Feature to the Ktor Client that you add to Ktorfit. See here : <a href=https://ktor.io/docs/serialization-client.html>https://ktor.io/docs/serialization-client.html</a></p> <div class=highlight><pre><span></span><code><span class=kd>val</span><span class=w> </span><span class=nv>ktorClient</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>HttpClient</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=n>install</span><span class=p>(</span><span class=n>ContentNegotiation</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>             </span><span class=n>json</span><span class=p>(</span><span class=n>Json</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>isLenient</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span><span class=p>;</span><span class=w> </span><span class=n>ignoreUnknownKeys</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=p>})</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <h2 id=streaming>Streaming<a class=headerlink href=#streaming title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=nd>@Streaming</span><span class=w></span>
<span class=nd>@GET</span><span class=p>(</span><span class=s>&quot;docs/response.html#streaming&quot;</span><span class=p>)</span><span class=w></span>
<span class=kd>suspend</span><span class=w> </span><span class=kd>fun</span><span class=w> </span><span class=nf>getPostsStreaming</span><span class=p>():</span><span class=w> </span><span class=n>HttpStatement</span><span class=w></span>
</code></pre></div> <p>To receive streaming data you need to annotate a function with @Streaming and the return type has to be HttpStatement.</p> <div class=highlight><pre><span></span><code><span class=n>exampleApi</span><span class=p>.</span><span class=na>getPostsStreaming</span><span class=p>().</span><span class=na>execute</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>response</span><span class=w> </span><span class=o>-&gt;</span><span class=w></span>
<span class=w>        </span><span class=c1>//Do something with response</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <p>For more information check <a href=https://ktor.io/docs/response.html#streaming>Ktor docs</a></p> <h2 id=requestbuilder>RequestBuilder<a class=headerlink href=#requestbuilder title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=nd>@GET</span><span class=p>(</span><span class=s>&quot;comments&quot;</span><span class=p>)</span><span class=w></span>
<span class=kd>suspend</span><span class=w> </span><span class=kd>fun</span><span class=w> </span><span class=nf>getCommentsById</span><span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=nd>@Query</span><span class=p>(</span><span class=s>&quot;postId&quot;</span><span class=p>)</span><span class=w> </span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=kt>String</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=nd>@ReqBuilder</span><span class=w> </span><span class=n>ext</span><span class=p>:</span><span class=w> </span><span class=n>HttpRequestBuilder</span><span class=p>.()</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=kt>Unit</span><span class=w></span>
<span class=p>):</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Comment</span><span class=o>&gt;</span><span class=w></span>
</code></pre></div> <p>You need to set extra configuration on your request? Add a parameter with &ldquo;@ReqBuilder ext: HttpRequestBuilder.() -&gt; Unit&rdquo; to your function. <div class=highlight><pre><span></span><code><span class=kd>val</span><span class=w> </span><span class=nv>result</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>secondApi</span><span class=p>.</span><span class=na>getCommentsById</span><span class=p>(</span><span class=s>&quot;3&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=n>onDownload</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>bytesSentTotal</span><span class=p>,</span><span class=w> </span><span class=n>contentLength</span><span class=w> </span><span class=o>-&gt;</span><span class=w></span>
<span class=w>        </span><span class=n>println</span><span class=p>(</span><span class=n>bytesSentTotal</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div></p> <p>Then you can use the extension function to set additional configuration. The RequestBuilder will be applied last after everything that is set by Ktorfit</p> <h2 id=setup>Setup<a class=headerlink href=#setup title="Permanent link">&para;</a></h2> <p>(You can also look how it&rsquo;s done in the <a href=https://github.com/Foso/Ktorfit/tree/master/example>examples</a>) For Kotlin Native Targets (iOS,Linux) you need to enable the new memory model in gradle.properties</p> <div class=highlight><pre><span></span><code><span class=n>kotlin</span><span class=p>.</span><span class=na>native</span><span class=p>.</span><span class=na>binary</span><span class=p>.</span><span class=na>memoryModel</span><span class=o>=</span><span class=n>experimental</span><span class=w></span>
</code></pre></div> <h4 id=ksp>KSP<a class=headerlink href=#ksp title="Permanent link">&para;</a></h4> <p>When you are not using KSP already you need to apply the plugin in your build.gradle <div class=highlight><pre><span></span><code><span class=n>plugins</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>  </span><span class=n>id</span><span class=p>(</span><span class=s>&quot;com.google.devtools.ksp&quot;</span><span class=p>)</span><span class=w> </span><span class=n>version</span><span class=w> </span><span class=s>&quot;1.6.20-1.0.4&quot;</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div></p> <p>Next you have to add the Ktorfit KSP Plugin to the common target and every compilation target, where you want to use Ktorfit.</p> <div class=highlight><pre><span></span><code><span class=kd>val</span><span class=w> </span><span class=nv>ktorfitVersion</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;1.0.0-beta06&quot;</span><span class=w></span>

<span class=n>dependencies</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=n>add</span><span class=p>(</span><span class=s>&quot;kspCommonMainMetadata&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;de.jensklingenberg.ktorfit:ktorfit-ksp:</span><span class=si>$</span><span class=n>ktorfitVersion</span><span class=s>&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=n>add</span><span class=p>(</span><span class=s>&quot;ksp[NAMEOFPLATFORM]&quot;</span><span class=p>,</span><span class=s>&quot;de.jensklingenberg.ktorfit:ktorfit-ksp:</span><span class=si>$</span><span class=n>ktorfitVersion</span><span class=s>&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>        </span><span class=p>...</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <p>[NAMEOFPLATFORM] is the name of the compilation target. When you want to use it for the Android module it&rsquo;s <strong>kspAndroid</strong>, for Js it&rsquo;s <strong>kspJs</strong>, etc. Look here for more information <a href=https://kotlinlang.org/docs/ksp-multiplatform.html>https://kotlinlang.org/docs/ksp-multiplatform.html</a></p> <h4 id=ktorfit-lib>Ktorfit-lib<a class=headerlink href=#ktorfit-lib title="Permanent link">&para;</a></h4> <p>Add the Ktorfit-lib to your common module. <div class=highlight><pre><span></span><code><span class=kd>val</span><span class=w> </span><span class=nv>ktorfitVersion</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;1.0.0-beta06&quot;</span><span class=w></span>

<span class=n>sourceSets</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=kd>val</span><span class=w> </span><span class=nv>commonMain</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>getting</span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=n>dependencies</span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=n>implementation</span><span class=p>(</span><span class=s>&quot;de.jensklingenberg.ktorfit:ktorfit-lib:</span><span class=si>$</span><span class=n>ktorfitVersion</span><span class=s>&quot;</span><span class=p>)</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>
</code></pre></div></p> <h4 id=ktor>Ktor<a class=headerlink href=#ktor title="Permanent link">&para;</a></h4> <p>Ktorfit is based on Ktor Clients 2.0.1. You don&rsquo;t need to add an extra dependency for the default clients. When you want to use Ktor plugins for things like serialization, you need to add the dependencies and they need to be compatible with 2.0.1</p> <h2 id=contributions>Contributions<a class=headerlink href=#contributions title="Permanent link">&para;</a></h2> <p>When you find unexpected behaviour please write an <a href=https://github.com/Foso/Ktorfit/issues/new/choose>issue</a></p> <hr> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">May 16, 2022</span> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </a> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; Apache v2 License 2022 Jens Klingenberg </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/foso target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg> </a> <a href=https://twitter.com/jklingenberg_ target=_blank rel=noopener title=twitter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> <a href=https://jensklingenberg.de/ target=_blank rel=noopener title=jensklingenberg.de class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": ".", "features": ["navigation.instant", "navigation.top", "toc.integrate", "search.suggest", "search.share"], "search": "assets/javascripts/workers/search.b028fd86.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=assets/javascripts/bundle.f758a944.min.js></script> </body> </html>